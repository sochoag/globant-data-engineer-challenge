<!-- templates/reports.html -->
{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
  <div class="jumbotron">
    <h1 class="display-4">Reports</h1>
    <p class="lead">Visualizations and tables for hiring analytics in 2021.</p>
    <hr class="my-4" />
  </div>

  <!-- GrÃ¡fico 1: Contrataciones por trimestre -->
  <div class="row mb-5">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
          Quarterly Hires by Department and Job
        </div>
        <div class="card-body">
          <div id="quarterly-chart" style="width:100%; height:870px;">
            {{ chart1 | safe }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tabla: Departamentos por encima del promedio -->
  <div class="row mb-5">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header bg-success text-white">
          Departments Above Average Hiring (2021)
        </div>
        <div class="card-body">
          <div id="above-average-chart" style="width:100%; height:500px;">
            {{ chart2 | safe }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tablas de datos -->
  <div class="row">
    <!-- Tabla: Quarterly Hires -->
    <div class="col-md-6">
      <div class="card mb-4 shadow-sm">
        <div class="card-header bg-info text-white">
          Quarterly Hires Table
        </div>
        <div class="card-body">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th>Department</th>
                <th>Job</th>
                <th>Q1</th>
                <th>Q2</th>
                <th>Q3</th>
                <th>Q4</th>
              </tr>
            </thead>
            <tbody>
              {% for item in quarterly_data %}
              <tr>
                <td>{{ item.department }}</td>
                <td>{{ item.job }}</td>
                <td>{{ item.Q1 }}</td>
                <td>{{ item.Q2 }}</td>
                <td>{{ item.Q3 }}</td>
                <td>{{ item.Q4 }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card mb-4 shadow-sm">
        <div class="card-header bg-success text-white">
          Departments Above Average Table
        </div>
        <div class="card-body">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th>ID</th>
                <th>Department</th>
                <th>Hired</th>
              </tr>
            </thead>
            <tbody>
              {% for item in above_avg_data %}
              <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.department }}</td>
                <td>{{ item.hired }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}